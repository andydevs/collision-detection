{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEO,IAAMA,KAAK;EACd,SAAAA,MAAA,EAAc;IAAAC,eAAA,OAAAD,KAAA;IACV,IAAI,CAACE,IAAI,GAAG,IAAI;IAChB,IAAI,CAACC,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;EAC1B;EAAC,OAAAC,YAAA,CAAAN,KAAA;IAAAO,GAAA;IAAAC,KAAA,EAED,SAAAC,IAAIA,CAAA,EAAG;MACH,IAAI,CAACP,IAAI,GAAG,IAAI,CAACC,IAAI;MACrB,IAAI,CAACA,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;IAC1B;EAAC;IAAAE,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAY;MACR,OAAO,IAAI,CAACP,IAAI,GAAG,IAAI,CAACD,IAAI;IAChC;EAAC;IAAAK,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAgB;MACZ,OAAOC,IAAI,CAACC,KAAK,CAAC,IAAI,GAAC,IAAI,CAACC,KAAK,CAAC;IACtC;EAAC;AAAA,I;;;;;;;;;;;;;;;;;;;;;ACxBL;AACA;AACA;AACA;AACA;AACA;AAC6B;;AAE7B;AACA;AACA;AACO,IAAME,IAAI;EACb;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,SAAAA,KAAYC,GAAG,EAAEC,GAAG,EAA2B;IAAA,IAAzBC,GAAG,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,EAAE;IAAA,IAAEG,KAAK,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,SAAS;IAAAlB,eAAA,OAAAc,IAAA;IACzC,IAAI,CAACC,GAAG,GAAGA,GAAG;IACd,IAAI,CAACC,GAAG,GAAGA,GAAG;IACd,IAAI,CAACC,GAAG,GAAGA,GAAG;IACd,IAAI,CAACI,KAAK,GAAGA,KAAK;EACtB;;EAEA;AACJ;AACA;EAFI,OAAAhB,YAAA,CAAAS,IAAA;IAAAR,GAAA;IAAAG,GAAA,EAGA,SAAAA,IAAA,EAAkB;MACd,OAAO,IAAII,uCAAI,CACX,IAAI,CAACE,GAAG,CAACO,CAAC,GAAG,IAAI,CAACL,GAAG,EACrB,IAAI,CAACF,GAAG,CAACO,CAAC,GAAG,IAAI,CAACL,GAAG,EACrB,IAAI,CAACF,GAAG,CAACQ,CAAC,GAAG,IAAI,CAACN,GAAG,EACrB,IAAI,CAACF,GAAG,CAACQ,CAAC,GAAG,IAAI,CAACN,GACtB,CAAC;IACL;;IAEA;AACJ;AACA;EAFI;IAAAX,GAAA;IAAAG,GAAA,EAGA,SAAAA,IAAA,EAAW;MACP,OAAO,IAAI,CAACQ,GAAG,GAAG,EAAE;IACxB;;IAEA;AACJ;AACA;AACA;AACA;EAJI;IAAAX,GAAA;IAAAC,KAAA,EAKA,SAAAiB,IAAIA,CAACC,MAAM,EAAE;MACTA,MAAM,CAACC,UAAU,CAAC,IAAI,CAACX,GAAG,EAAE,IAAI,CAACE,GAAG,EAAE,IAAI,CAACI,KAAK,CAAC;IACrD;;IAEA;AACJ;AACA;EAFI;IAAAf,GAAA;IAAAC,KAAA,EAGA,SAAAoB,MAAMA,CAAA,EAAG;MACL,IAAI,CAACZ,GAAG,GAAG,IAAI,CAACA,GAAG,CAACa,GAAG,CAAC,IAAI,CAACZ,GAAG,CAAC;IACrC;EAAC;AAAA,I;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3DL;AACA;AACA;AACA;AACA;AACA;AACmC;AACqC;;AAExE;AACA;AACA;AACO,IAAMH,IAAI;EACb,SAAAA,KAAYoB,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAE;IAAApC,eAAA,OAAAa,IAAA;IACxB,IAAI,CAACoB,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,EAAE,GAAGA,EAAE;EAChB;EAAC,OAAA/B,YAAA,CAAAQ,IAAA;IAAAP,GAAA;IAAAC,KAAA,EAED,SAAA8B,QAAQA,CAACC,IAAI,EAAE;MACX,OAAQ,IAAI,CAACL,EAAE,GAAGK,IAAI,CAACJ,EAAE,IAAII,IAAI,CAACL,EAAE,IAAI,IAAI,CAACC,EAAE,IACvC,IAAI,CAACC,EAAE,GAAGG,IAAI,CAACF,EAAE,IAAIE,IAAI,CAACH,EAAE,IAAI,IAAI,CAACC,EAAG;IACpD;EAAC;IAAA9B,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAW;MACP,OAAO,IAAIoB,oDAAM,CAAC,IAAI,CAACI,EAAE,EAAE,IAAI,CAACE,EAAE,CAAC;IACvC;EAAC;IAAA7B,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAW;MACP,OAAO,IAAIoB,oDAAM,CAAC,IAAI,CAACK,EAAE,EAAE,IAAI,CAACE,EAAE,CAAC;IACvC;EAAC;IAAA9B,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAa;MACT,IAAMwB,EAAE,GAAiB,IAAI,CAAvBA,EAAE;QAAEC,EAAE,GAAa,IAAI,CAAnBA,EAAE;QAAEC,EAAE,GAAS,IAAI,CAAfA,EAAE;QAAEC,EAAE,GAAK,IAAI,CAAXA,EAAE;MACpB,OAAO,IAAIP,oDAAM,CAAC,CAACI,EAAE,GAACC,EAAE,IAAE,CAAC,EAAE,CAACC,EAAE,GAACC,EAAE,IAAE,CAAC,CAAC;IAC3C;EAAC;IAAA9B,GAAA;IAAAC,KAAA,EAED,SAAAgC,SAASA,CAACC,OAAO,EAAEC,IAAI,EAAE;MACrB,IAAIC,YAAY,GAAGV,yDAAY,CAAC,IAAI,CAACC,EAAE,EAAE,IAAI,CAACC,EAAE,EAAEM,OAAO,GAAG,CAAC,CAAC;MAC9D,IAAIG,SAAS,GAAGX,yDAAY,CAAC,IAAI,CAACG,EAAE,EAAE,IAAI,CAACC,EAAE,EAAEK,IAAI,GAAG,CAAC,CAAC;MACxD,OAAOV,yDAAY,CACXD,wDAAW,CAACY,YAAY,CAACvB,MAAM,GAAG,CAAC,CAAC,EACpCW,wDAAW,CAACa,SAAS,CAACxB,MAAM,GAAG,CAAC,CACpC,CAAC,CACAyB,GAAG,CAAC,UAAAC,IAAA;QAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;UAAEG,CAAC,GAAAF,KAAA;UAAEG,CAAC,GAAAH,KAAA;QAAA,OAAM,IAAIjC,IAAI,CACrB6B,YAAY,CAACM,CAAC,CAAC,EACfN,YAAY,CAACM,CAAC,GAAG,CAAC,CAAC,EACnBL,SAAS,CAACM,CAAC,CAAC,EACZN,SAAS,CAACM,CAAC,GAAG,CAAC,CACnB,CAAC;MAAA,EAAC;IACV;EAAC;AAAA,I;;;;;;;;;;;;;;;;;ACnDL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASnB,WAAWA,CAACoB,KAAK,EAA0B;EAAA,IAAxBC,IAAI,GAAAjC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACE,SAAS;EAAA,IAAEgC,IAAI,GAAAlC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC;EACrD,IAAIiC,IAAI,KAAK/B,SAAS,EAAE;IACpB+B,IAAI,GAAGD,KAAK;IACZA,KAAK,GAAG,CAAC;EACb;EACA,OAAOG,KAAK,CAACC,IAAI,CACb;IAAEnC,MAAM,EAAET,IAAI,CAAC6C,IAAI,CAAC,CAACJ,IAAI,GAAGD,KAAK,IAAEE,IAAI;EAAE,CAAC,EAC1C,UAACI,CAAC,EAAER,CAAC;IAAA,OAAKE,KAAK,GAAGF,CAAC,GAACI,IAAI;EAAA,EAAC;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASK,WAAWA,CAACC,KAAK,EAAE;EAC/B,OAAOA,KAAK,CAACC,OAAO,CAAC,UAACC,CAAC,EAAEZ,CAAC;IAAA,OAAKU,KAAK,CAACG,KAAK,CAACb,CAAC,GAAC,CAAC,CAAC,CAACJ,GAAG,CAAC,UAAAkB,CAAC;MAAA,OAAI,CAACF,CAAC,EAAEE,CAAC,CAAC;IAAA,EAAC;EAAA,EAAC;AACrE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAAS/B,YAAYA,CAACgC,MAAM,EAAEC,MAAM,EAAE;EACzC,OAAOD,MAAM,CAACJ,OAAO,CAAC,UAAAM,EAAE;IAAA,OAAID,MAAM,CAACpB,GAAG,CAAC,UAAAsB,EAAE;MAAA,OAAI,CAACD,EAAE,EAAEC,EAAE,CAAC;IAAA,EAAC;EAAA,EAAC;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASlC,YAAYA,CAACkB,KAAK,EAAEC,IAAI,EAAEgB,CAAC,EAAE;EACzC,IAAIf,IAAI,GAAG,CAACD,IAAI,GAAGD,KAAK,KAAGiB,CAAC,GAAG,CAAC,CAAC;EACjC,OAAOd,KAAK,CAACC,IAAI,CAAC;IAAEnC,MAAM,EAAEgD;EAAE,CAAC,EAAE,UAACX,CAAC,EAAER,CAAC;IAAA,OAAKE,KAAK,GAAGE,IAAI,GAACJ,CAAC;EAAA,EAAC;AAC9D,C;;;;;;;;;;;;;;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AAC6B;;AAE7B;AACA;AACA;AAFA,IAGqBoB,MAAM;EACvB;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;EACI,SAAAA,OAAYC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAE;IAAAxE,eAAA,OAAAoE,MAAA;IACxB,IAAI,CAACC,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACC,EAAE,GAAGA,EAAE;EAChB;;EAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EANI,OAAAnE,YAAA,CAAA+D,MAAA;IAAA9D,GAAA;IAAAC,KAAA,EAOA,SAAAqB,GAAGA,CAAC6C,KAAK,EAAE;MACP,OAAO,IAAIL,MAAM,CACb,IAAI,CAACC,EAAE,GAAGI,KAAK,CAACJ,EAAE,EAClB,IAAI,CAACC,EAAE,GAAGG,KAAK,CAACH,EAAE,EAClB,IAAI,CAACC,EAAE,GAAGE,KAAK,CAACF,EAAE,EAClB,IAAI,CAACC,EAAE,GAAGC,KAAK,CAACD,EACpB,CAAC;IACL;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EANI;IAAAlE,GAAA;IAAAC,KAAA,EAOA,SAAAmE,KAAKA,CAACC,MAAM,EAAE;MACV,OAAO,IAAIP,MAAM,CACb,IAAI,CAACC,EAAE,GAAGM,MAAM,EAChB,IAAI,CAACL,EAAE,GAAGK,MAAM,EAChB,IAAI,CAACJ,EAAE,GAAGI,MAAM,EAChB,IAAI,CAACH,EAAE,GAAGG,MACd,CAAC;IACL;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EANI;IAAArE,GAAA;IAAAC,KAAA,EAOA,SAAAqE,SAASA,CAACC,IAAI,EAAE;MACZ,OAAO,IAAIhD,+CAAM,CACb,IAAI,CAACwC,EAAE,GAACQ,IAAI,CAACvD,CAAC,GAAG,IAAI,CAACgD,EAAE,GAACO,IAAI,CAACtD,CAAC,EAC/B,IAAI,CAACgD,EAAE,GAACM,IAAI,CAACvD,CAAC,GAAG,IAAI,CAACkD,EAAE,GAACK,IAAI,CAACtD,CAClC,CAAC;IACL;EAAC;AAAA;;;;;;;;;;;;;;;;;;;;;;;ACvEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMwD,MAAM,GAAG,SAATA,MAAMA,CAAIC,CAAC,EAAE1D,CAAC;EAAA,OAAK0D,CAAC,GAAGtE,IAAI,CAACqE,MAAM,CAAC,CAAC,IAAEzD,CAAC,GAAG0D,CAAC,CAAC;AAAA;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,cAAcA,CAACD,CAAC,EAAE1D,CAAC,EAAoC;EAAA,IAAlC4D,IAAI,GAAAhE,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC;EAAA,IAAEiE,cAAc,GAAAjE,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAACE,SAAS;EACjE,IAAIgE,CAAC,GAAG1E,IAAI,CAAC2E,GAAG,CAAC,CAAC,GAAGH,IAAI,EAAE,CAAC,CAAC;EAC7B,IAAII,CAAC,GAAG5E,IAAI,CAACqE,MAAM,CAAC,CAAC;EACrB,IAAIQ,CAAC,GAAID,CAAC,GAACF,CAAC,IAAGE,CAAC,GAACF,CAAC,GAAGE,CAAC,GAAG,CAAC,CAAC;EAC3B,IAAIE,MAAM,GAAGR,CAAC,GAAGO,CAAC,IAAEjE,CAAC,GAAG0D,CAAC,CAAC;EAC1B,IAAIG,cAAc,IAAI,CAAC,EAAE;IACrB,IAAIM,OAAO,GAAG/E,IAAI,CAAC2E,GAAG,CAAC,EAAE,EAAEF,cAAc,CAAC;IAC1CK,MAAM,GAAG9E,IAAI,CAACgF,KAAK,CAACF,MAAM,GAAGC,OAAO,CAAC,GAAGA,OAAO;EACnD;EACA,OAAOD,MAAM;AACjB;;AAEA;AACA;AACA;AAFA,IAGqB3D,MAAM;EACvB;AACJ;AACA;AACA;AACA;AACA;EACI,SAAAA,OAAYP,CAAC,EAAEC,CAAC,EAAE;IAAAvB,eAAA,OAAA6B,MAAA;IACd,IAAI,CAACP,CAAC,GAAGA,CAAC;IACV,IAAI,CAACC,CAAC,GAAGA,CAAC;EACd;;EAEA;AACJ;AACA;EAFI,OAAAlB,YAAA,CAAAwB,MAAA;IAAAvB,GAAA;IAAAG,GAAA,EAGA,SAAAA,IAAA,EAAgB;MACZ,OAAOC,IAAI,CAACiF,IAAI,CAAC,IAAI,CAACC,GAAG,CAAC,IAAI,CAAC,CAAC;IACpC;;IAEA;AACJ;AACA;EAFI;IAAAtF,GAAA;IAAAG,GAAA,EAGA,SAAAA,IAAA,EAAW;MACP,OAAO,IAAI,CAACiE,KAAK,CAAC,CAAC,GAAC,IAAI,CAACmB,SAAS,CAAC;IACvC;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EANI;IAAAvF,GAAA;IAAAC,KAAA,EAOA,SAAAqB,GAAGA,CAAC6C,KAAK,EAAE;MACP,OAAO,IAAI5C,MAAM,CAAC,IAAI,CAACP,CAAC,GAAGmD,KAAK,CAACnD,CAAC,EAAE,IAAI,CAACC,CAAC,GAAGkD,KAAK,CAAClD,CAAC,CAAC;IACzD;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EANI;IAAAjB,GAAA;IAAAC,KAAA,EAOA,SAAAmE,KAAKA,CAACC,MAAM,EAAE;MACV,OAAO,IAAI9C,MAAM,CAAC,IAAI,CAACP,CAAC,GAAGqD,MAAM,EAAE,IAAI,CAACpD,CAAC,GAAGoD,MAAM,CAAC;IACvD;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EANI;IAAArE,GAAA;IAAAC,KAAA,EAOA,SAAAuF,GAAGA,CAACrB,KAAK,EAAE;MACP,OAAOA,KAAK,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC9C,GAAG,CAAC,IAAI,CAAC;IACpC;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;EANI;IAAAtB,GAAA;IAAAC,KAAA,EAOA,SAAAqF,GAAGA,CAACnB,KAAK,EAAE;MACP,OAAO,IAAI,CAACnD,CAAC,GAACmD,KAAK,CAACnD,CAAC,GAAG,IAAI,CAACC,CAAC,GAACkD,KAAK,CAAClD,CAAC;IAC1C;;IAEA;AACJ;AACA;AACA;AACA;EAJI;IAAAjB,GAAA;IAAAC,KAAA,EAKA,SAAAwF,QAAQA,CAAA,EAAG;MACP,WAAAC,MAAA,CAAW,IAAI,CAAC1E,CAAC,CAAC2E,OAAO,CAAC,CAAC,CAAC,QAAAD,MAAA,CAAK,IAAI,CAACzE,CAAC,CAAC0E,OAAO,CAAC,CAAC,CAAC;IACtD;EAAC;AAAA,KAGL;AAhF2B;AAiF3BpE,MAAM,CAACqE,IAAI,GAAG,IAAIrE,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAA,MAAM,CAACkD,MAAM,GAAG,UAACoB,EAAE,EAAE9B,EAAE,EAAE+B,EAAE,EAAE7B,EAAE;EAAA,OAAK,IAAI1C,MAAM,CAACkD,MAAM,CAACoB,EAAE,EAAE9B,EAAE,CAAC,EAAEU,MAAM,CAACqB,EAAE,EAAE7B,EAAE,CAAC,CAAC;AAAA,E;;;;;;;;;;;;;;;;;;ACxI9E;AACA;AACA;AACA;AACA;AACA;AACmC;AACA;AACe;;AAElD;AACA,IAAMgC,OAAO,GAAG,IAAI;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,iBAAiBA,CAAC/E,MAAM,EAAEgF,QAAQ,EAAEC,IAAI,EAAExG,IAAI,EAAEyG,MAAM,EAAe;EAAA,IAAbC,KAAK,GAAA1F,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,KAAK;EAC/E;EACA,IAAI2F,QAAQ,GAAGH,IAAI,CAAC3F,GAAG,CAAC+E,GAAG,CAACW,QAAQ,CAAC1F,GAAG,CAAC,CAAC6E,GAAG,CAACa,QAAQ,CAACK,IAAI,CAAC;EAC5D,IAAID,QAAQ,GAAGH,IAAI,CAACzF,GAAG,EAAE;IACrB,IAAI2F,KAAK,EAAE;MACPG,OAAO,CAACC,KAAK,CAAC,WAAW,CAAC;MAC1BD,OAAO,CAACE,GAAG,CAACR,QAAQ,CAAC;MACrBM,OAAO,CAACE,GAAG,CAACP,IAAI,CAAC;MACjBK,OAAO,CAACG,QAAQ,CAAC,CAAC;IACtB;IACA,IAAIC,UAAU,GAAGT,IAAI,CAACzF,GAAG,GAAG4F,QAAQ;IACpCH,IAAI,CAAC3F,GAAG,GAAG2F,IAAI,CAAC3F,GAAG,CAACa,GAAG,CAAC6E,QAAQ,CAACK,IAAI,CAACpC,KAAK,CAACyC,UAAU,CAAC,CAAC;;IAExD;IACA,IAAIC,OAAO,GAAGX,QAAQ,CAACK,IAAI,CAACpC,KAAK,CAACgC,IAAI,CAAC1F,GAAG,CAAC4E,GAAG,CAACa,QAAQ,CAACK,IAAI,CAAC,CAAC;IAC9D,IAAIO,SAAS,GAAGX,IAAI,CAAC1F,GAAG,CAAC8E,GAAG,CAACsB,OAAO,CAAC;IACrC,IAAIE,MAAM,GAAGD,SAAS,CAACvB,GAAG,CAACsB,OAAO,CAAC;;IAEnC;IACA,IAAIR,KAAK,EAAE;MACP;MACA,IAAIW,MAAM,GAAG,EAAE;MACf,IAAIC,SAAS,GAAG,CAAC;;MAEjB;MACAb,MAAM,CAACc,IAAI,CACP,IAAInB,gDAAQ,CAACpG,IAAI,GAAG,CAAC,GAACqG,OAAO,EACzBG,IAAI,CAAC3F,GAAG,CAAC+E,GAAG,CAACW,QAAQ,CAACK,IAAI,CAACpC,KAAK,CAACgC,IAAI,CAACzF,GAAG,CAAC,CAAC,EAC3CyF,IAAI,CAAC1F,GAAG,CAAC0D,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE6C,MAAM,EAC1B,MAAM,EAAEC,SACZ,CAAC,EACD,IAAIlB,gDAAQ,CAACpG,IAAI,GAAG,CAAC,GAACqG,OAAO,EACzBG,IAAI,CAAC3F,GAAG,CAAC+E,GAAG,CAACW,QAAQ,CAACK,IAAI,CAACpC,KAAK,CAACgC,IAAI,CAACzF,GAAG,CAAC,CAAC,EAC3CqG,MAAM,EAAEC,MAAM,EACd,MAAM,EAAEC,SACZ,CACJ,CAAC;IACL;;IAEA;IACAd,IAAI,CAAC1F,GAAG,GAAGsG,MAAM;;IAEjB;IACA,OAAO,IAAI;EACf,CAAC,MACI;IACD;IACA,OAAO,KAAK;EAChB;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASI,aAAaA,CAACjG,MAAM,EAAEmC,CAAC,EAAEE,CAAC,EAAE5D,IAAI,EAAEyG,MAAM,EAAe;EAAA,IAAbC,KAAK,GAAA1F,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,KAAK;EACjE;EACA,IAAIyG,4BAA4B,GAAG7D,CAAC,CAAC/C,GAAG,CAAC+E,GAAG,CAAClC,CAAC,CAAC7C,GAAG,CAAC;;EAEnD;EACA,IAAI4G,4BAA4B,CAAC9B,SAAS,GAAIjC,CAAC,CAAC3C,GAAG,GAAG6C,CAAC,CAAC7C,GAAI,EAAE;IAC1D;IACA,IAAI2G,eAAe,GAAGD,4BAA4B,CAACE,IAAI;IACvD,IAAIC,mBAAmB,GAAGF,eAAe,CAAClD,KAAK,CAAC,CAAC,CAAC,CAAC;;IAEnD;IACA,IAAIqD,4BAA4B,GAAG,CAAEnE,CAAC,CAAC3C,GAAG,GAAG6C,CAAC,CAAC7C,GAAG,GAAI0G,4BAA4B,CAAC9B,SAAS,IAAE,CAAC;IAC/F,IAAImC,kBAAkB,GAAGpE,CAAC,CAAC7C,GAAG,CACzBa,GAAG,CAACkG,mBAAmB,CAACpD,KAAK,CAACqD,4BAA4B,CAAC,CAAC;IACjE,IAAIE,kBAAkB,GAAGnE,CAAC,CAAC/C,GAAG,CACzBa,GAAG,CAACgG,eAAe,CAAClD,KAAK,CAACqD,4BAA4B,CAAC,CAAC;;IAE7D;IACA,IAAIG,2BAA2B,GAAGN,eAAe,CAC5ClD,KAAK,CAACd,CAAC,CAAC5C,GAAG,CAAC4E,GAAG,CAACgC,eAAe,CAAC,CAAC;IACtC,IAAIO,+BAA+B,GAAGL,mBAAmB,CACpDpD,KAAK,CAACZ,CAAC,CAAC9C,GAAG,CAAC4E,GAAG,CAACkC,mBAAmB,CAAC,CAAC;;IAE1C;IACA,IAAIM,iBAAiB,GAAGxE,CAAC,CAAC5C,GAAG,CAAC8E,GAAG,CAACoC,2BAA2B,CAAC;IAC9D,IAAIG,iBAAiB,GAAGvE,CAAC,CAAC9C,GAAG,CAAC8E,GAAG,CAACqC,+BAA+B,CAAC;;IAElE;IACA,IAAIG,yBAAyB,GAAG,IAAIzG,oDAAM,CACtCqG,2BAA2B,CAACrC,SAAS,EACrCsC,+BAA+B,CAACtC,SACpC,CAAC;IACD,IAAI0C,UAAU,GAAG,IAAInE,oDAAM,CACtBR,CAAC,CAAC4E,IAAI,GAAG1E,CAAC,CAAC0E,IAAI,EAAG,CAAC,GAAC1E,CAAC,CAAC0E,IAAI,EAC3B,CAAC,GAAC5E,CAAC,CAAC4E,IAAI,EAAG1E,CAAC,CAAC0E,IAAI,GAAG5E,CAAC,CAAC4E,IAC1B,CAAC,CAAC9D,KAAK,CAAC,CAAC,IAAEd,CAAC,CAAC4E,IAAI,GAAG1E,CAAC,CAAC0E,IAAI,CAAC,CAAC;IAC5B,IAAIC,0BAA0B,GAAGF,UAAU,CACtC3D,SAAS,CAAC0D,yBAAyB,CAAC;IACzC,IAAII,sBAAsB,GAAGd,eAAe,CACvClD,KAAK,CAAC,CAAC+D,0BAA0B,CAACnH,CAAC,CAAC,CACpCM,GAAG,CAACwG,iBAAiB,CAAC;IAC3B,IAAIO,sBAAsB,GAAGb,mBAAmB,CAC3CpD,KAAK,CAAC,CAAC+D,0BAA0B,CAAClH,CAAC,CAAC,CACpCK,GAAG,CAACyG,iBAAiB,CAAC;;IAE3B;IACA,IAAIzB,KAAK,EAAE;MACP;MACA,IAAIgC,oBAAoB,GAAG,EAAE;MAC7B,IAAIrB,MAAM,GAAG,EAAE;MACf,IAAIC,SAAS,GAAG,CAAC;;MAEjB;MACA,IAAIqB,eAAe,GAAGjF,CAAC,CAAC7C,GAAG,CAACa,GAAG,CAACkC,CAAC,CAAC/C,GAAG,CAAC,CAAC2D,KAAK,CAAC,GAAG,CAAC;MACjD,IAAIoE,iBAAiB,GAAG,IAAIjH,oDAAM,CAAC,CAAC+F,eAAe,CAACrG,CAAC,EAAEqG,eAAe,CAACtG,CAAC,CAAC;;MAEzE;MACAqF,MAAM,CAACc,IAAI,CACP,IAAIpB,iDAAS,CAACnG,IAAI,GAAG,CAAC,GAACqG,OAAO,EAC1BsC,eAAe,CAAC/C,GAAG,CAACgD,iBAAiB,CAACpE,KAAK,CAACkE,oBAAoB,GAAC,CAAC,CAAC,CAAC,EACpEC,eAAe,CAACjH,GAAG,CAACkH,iBAAiB,CAACpE,KAAK,CAACkE,oBAAoB,GAAC,CAAC,CAAC,CAAC,EACpE,MAAM,EAAEpB,SACZ,CAAC,EACD,IAAIlB,gDAAQ,CAACpG,IAAI,GAAG,CAAC,GAACqG,OAAO,EACzBsC,eAAe,EAAEjF,CAAC,CAAC5C,GAAG,CAAC0D,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE6C,MAAM,EACxC,MAAM,EAAEC,SACZ,CAAC,EACD,IAAIlB,gDAAQ,CAACpG,IAAI,GAAG,CAAC,GAACqG,OAAO,EACzBsC,eAAe,EAAEH,sBAAsB,EAAEnB,MAAM,EAC/C,MAAM,EAAEC,SACZ,CAAC,EACD,IAAIlB,gDAAQ,CAACpG,IAAI,GAAG,CAAC,GAACqG,OAAO,EACzBsC,eAAe,EAAE/E,CAAC,CAAC9C,GAAG,CAAC0D,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE6C,MAAM,EACxC,MAAM,EAAEC,SACZ,CAAC,EACD,IAAIlB,gDAAQ,CAACpG,IAAI,GAAG,CAAC,GAACqG,OAAO,EACzBsC,eAAe,EAAEF,sBAAsB,EAAEpB,MAAM,EAC/C,MAAM,EAAEC,SACZ,CACJ,CAAC;IACL;;IAEA;IACA5D,CAAC,CAAC7C,GAAG,GAAGiH,kBAAkB;IAC1BpE,CAAC,CAAC5C,GAAG,GAAG0H,sBAAsB;IAC9B5E,CAAC,CAAC/C,GAAG,GAAGkH,kBAAkB;IAC1BnE,CAAC,CAAC9C,GAAG,GAAG2H,sBAAsB;;IAE9B;IACA,OAAO,IAAI;EACf;;EAEA;EACA,OAAO,KAAK;AAChB,C;;;;;;;;;;;;;;;;;;;;;;;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACyC;AACG;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASK,cAAcA,CAACvH,MAAM,EAAEwH,KAAK,EAAE/I,IAAI,EAAEyG,MAAM,EAAe;EAAA,IAAbC,KAAK,GAAA1F,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,KAAK;EACnE,OAAOuC,wDAAW,CAACwF,KAAK,CAAC;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,sBAAsBA,CAACzG,IAAI,EAAED,OAAO,EAAE;EAClD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAO,SAAS2G,kBAAkBA,CAAC1H,MAAM,EAAEwH,KAAK,EAAE/I,IAAI,EAAEyG,MAAM,EAAe;IAAA,IAAbC,KAAK,GAAA1F,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,KAAK;IACvE;IACA,IAAIkI,KAAK,GAAG3H,MAAM,CAAC4H,SAAS,CAAC9G,SAAS,CAACC,OAAO,EAAEC,IAAI,CAAC;IACrD,IAAImE,KAAK,EAAE;MACPD,MAAM,CAACc,IAAI,CAAA6B,KAAA,CAAX3C,MAAM,EAAA4C,kBAAA,CAASH,KAAK,CAACxG,GAAG,CAAC,UAAA4G,IAAI;QAAA,OACzB,IAAIT,iDAAS,CAAC7I,IAAI,GAAG,EAAE,EAAEsJ,IAAI,EAAE,MAAM,CAAC;MAAA,CAC1C,CAAC,EAAC;IACN;;IAEA;IACA,OAAOJ,KAAK,CAACzF,OAAO,CAAC,UAAA6F,IAAI;MAAA,OACrB/F,wDAAW,CACPwF,KAAK,CAACQ,MAAM,CAAC,UAAA/C,IAAI;QAAA,OACbA,IAAI,CAACgD,WAAW,CAACrH,QAAQ,CAACmH,IAAI,CAAC;MAAA,EACvC,CAAC;IAAA,CACL,CAAC;EACL,CAAC;AACL;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASG,uBAAuBA,CAACC,YAAY,EAAEC,SAAS,EAAc;EAAA,IAAZC,QAAQ,GAAA5I,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC;EACvE;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,OAAO,SAAS6I,mBAAmBA,CAACtI,MAAM,EAAEwH,KAAK,EAAE/I,IAAI,EAAEyG,MAAM,EAAe;IAAA,IAAbC,KAAK,GAAA1F,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,KAAK;IACxE,IAAI8I,mBAAkB,GAAG,SAArBA,kBAAkBA,CAAIf,KAAK,EAAEgB,IAAI,EAAwD;MAAA,IAAtDC,IAAI,GAAAhJ,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC0I,YAAY;MAAA,IAAEO,IAAI,GAAAjJ,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC2I,SAAS;MAAA,IAAEO,KAAK,GAAAlJ,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC4I,QAAQ;MACpF;MACA,IAAIb,KAAK,CAAC9H,MAAM,GAAG,CAAC,EAAE;QAAE,OAAO,EAAE;MAAC;MAClC,IAAI8H,KAAK,CAAC9H,MAAM,KAAK,CAAC,IAAIiJ,KAAK,KAAK,CAAC,EAAE;QAAE,OAAO,CAAC;UAAEC,CAAC,EAAEpB;QAAM,CAAC,CAAC;MAAC;;MAE/D;MACA,IAAIG,KAAK,GAAGa,IAAI,CAAC1H,SAAS,CAAC2H,IAAI,EAAEC,IAAI,CAAC;MACtC,IAAIvD,KAAK,EAAE;QACPD,MAAM,CAACc,IAAI,CAAA6B,KAAA,CAAX3C,MAAM,EAAA4C,kBAAA,CAASH,KAAK,CAACxG,GAAG,CAAC,UAAA4G,IAAI;UAAA,OACzB,IAAIT,iDAAS,CAAC7I,IAAI,GAAG,EAAE,EAAEsJ,IAAI,EAAE,MAAM,CAAC;QAAA,CAC1C,CAAC,EAAC;MACN;;MAEA;MACA,OAAOJ,KAAK,CAACzF,OAAO,CAAC,UAAA6F,IAAI;QAAA,OACrBQ,mBAAkB,CACdf,KAAK,CAACQ,MAAM,CAAC,UAAA/C,IAAI;UAAA,OAAIA,IAAI,CAACgD,WAAW,CAACrH,QAAQ,CAACmH,IAAI,CAAC;QAAA,EAAC,EACrDA,IAAI,EAAEW,IAAI,EAAED,IAAI,EAAEE,KAAK,GAAG,CAAC,CAAC;MAAA,CACpC,CAAC;IACL,CAAC;IACD,OAAOJ,mBAAkB,CAACf,KAAK,EAAExH,MAAM,CAAC4H,SAAS,CAAC,CAACzG,GAAG,CAAC,UAAAC,IAAA;MAAA,IAAEwH,CAAC,GAAAxH,IAAA,CAADwH,CAAC;MAAA,OAAMA,CAAC;IAAA,EAAC;EACtE,CAAC;AACL,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/GA;AACA;AACA;AACA;AACA;AACA;;AAEO,IAAMC,gBAAgB;EACzB,SAAAA,iBAAYC,OAAO,EAAE;IAAA,IAAAC,KAAA;IAAAxK,eAAA,OAAAsK,gBAAA;IACjB,IAAI,CAACG,gBAAgB,GAAGC,QAAQ,CAACC,aAAa,CAAC,iBAAiB,CAAC;IACjE,IAAI,CAACC,QAAQ,GAAGL,OAAO;IACvBM,MAAM,CAACC,OAAO,CAAC,IAAI,CAACF,QAAQ,CAAC,CAACG,OAAO,CAAC,UAAAlI,IAAA,EAAwB;MAAA,IAAAC,KAAA,GAAAC,cAAA,CAAAF,IAAA;QAAtBvC,GAAG,GAAAwC,KAAA;QAAIkI,OAAO,GAAAlI,KAAA,IAAPkI,OAAO;MAClD,IAAIC,MAAM,GAAGP,QAAQ,CAACQ,aAAa,CAAC,QAAQ,CAAC;MAC7CD,MAAM,CAACE,YAAY,CAAC,OAAO,EAAE7K,GAAG,CAAC;MACjC2K,MAAM,CAACG,WAAW,GAAGJ,OAAO;MAC5BR,KAAI,CAACC,gBAAgB,CAACY,WAAW,CAACJ,MAAM,CAAC;IAC7C,CAAC,CAAC;EACN;EAAC,OAAA5K,YAAA,CAAAiK,gBAAA;IAAAhK,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAY;MACR,OAAO,IAAI,CAACgK,gBAAgB,CAAClK,KAAK;IACtC;EAAC;IAAAD,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAW;MACP,OAAO,IAAI,CAACmK,QAAQ,CAAC,IAAI,CAACrK,KAAK,CAAC,CAAC+K,IAAI;IACzC;EAAC;AAAA;AAGE,IAAMC,QAAQ;EAGjB,SAAAA,SAAYC,gBAAgB,EAAE;IAAAxL,eAAA,OAAAuL,QAAA;IAC1B,IAAI,CAACE,YAAY,GAAGf,QAAQ,CAACC,aAAa,CAAC,eAAe,CAAC;IAC3D,IAAI,CAACe,SAAS,GAAGhB,QAAQ,CAACC,aAAa,CAAC,YAAY,CAAC;IACrD,IAAI,CAACgB,eAAe,GAAGjB,QAAQ,CAACC,aAAa,CAAC,iBAAiB,CAAC;IAChE,IAAI,CAACiB,eAAe,GAAGlB,QAAQ,CAACC,aAAa,CAAC,iBAAiB,CAAC;IAChE,IAAI,CAACkB,eAAe,GAAGnB,QAAQ,CAACC,aAAa,CAAC,kBAAkB,CAAC;IACjE,IAAI,CAACmB,iBAAiB,GAAGN,gBAAgB;;IAEzC;IACA,IAAI,CAACO,WAAW,CAAC,CAAC;IAClB,IAAI,CAACC,6BAA6B,CAAC,CAAC;EACxC;EAAC,OAAA3L,YAAA,CAAAkL,QAAA;IAAAjL,GAAA;IAAAC,KAAA,EAED,SAAAwL,WAAWA,CAAA,EAAG;MACV;MACAhF,OAAO,CAACkF,cAAc,CAAC,gCAAgC,CAAC;MACxDlF,OAAO,CAACE,GAAG,CAAC,2BAA2B,EAAEsE,QAAQ,CAACW,UAAU,CAAC;MAC7D,IAAIC,cAAc,GAAGC,YAAY,CAACC,OAAO,CAACd,QAAQ,CAACW,UAAU,CAAC;MAC9D,IAAIC,cAAc,EAAE;QAChBpF,OAAO,CAACE,GAAG,CAAC,wBAAwB,CAAC;QACrCF,OAAO,CAACE,GAAG,CAACkF,cAAc,CAAC;QAC3BpF,OAAO,CAACE,GAAG,CAAC,cAAc,CAAC;QAC3B,IAAIqF,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACL,cAAc,CAAC;QAC3CpF,OAAO,CAACE,GAAG,CAACqF,UAAU,CAAC;QACvB,IAAI,CAACb,YAAY,CAAClL,KAAK,GAAG+L,UAAU,CAACG,WAAW;QAChD,IAAI,CAACf,SAAS,CAACnL,KAAK,GAAG+L,UAAU,CAACI,QAAQ;QAC1C,IAAI,CAACd,eAAe,CAACe,OAAO,GAAGL,UAAU,CAACM,cAAc;QACxD,IAAI,CAACf,eAAe,CAACc,OAAO,GAAGL,UAAU,CAACO,cAAc;QACxD,IAAI,CAACf,iBAAiB,CAACrB,gBAAgB,CAAClK,KAAK,GAAG+L,UAAU,CAACQ,aAAa;MAC5E;MACA/F,OAAO,CAACG,QAAQ,CAAC,CAAC;IACtB;EAAC;IAAA5G,GAAA;IAAAC,KAAA,EAED,SAAAyL,6BAA6BA,CAAA,EAAG;MAC5B,IAAIe,MAAM,GAAG,CACT,IAAI,CAACtB,YAAY,EACjB,IAAI,CAACC,SAAS,EACd,IAAI,CAACC,eAAe,EACpB,IAAI,CAACC,eAAe,EACpB,IAAI,CAACC,eAAe,EACpB,IAAI,CAACC,iBAAiB,CAACrB,gBAAgB,CAC1C;MACD,SAAAuC,EAAA,MAAAC,OAAA,GAAkBF,MAAM,EAAAC,EAAA,GAAAC,OAAA,CAAA9L,MAAA,EAAA6L,EAAA,IAAE;QAArB,IAAME,GAAG,GAAAD,OAAA,CAAAD,EAAA;QACVE,GAAG,CAACC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACC,WAAW,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;MAC/D;IACJ;EAAC;IAAA/M,GAAA;IAAAC,KAAA,EAED,SAAA6M,WAAWA,CAAA,EAAG;MACVrG,OAAO,CAACkF,cAAc,CAAC,aAAa,CAAC;MACrC,IAAIqB,SAAS,GAAG;QACZb,WAAW,EAAE,IAAI,CAAChB,YAAY,CAAClL,KAAK;QACpCmM,QAAQ,EAAE,IAAI,CAAChB,SAAS,CAACnL,KAAK;QAC9BqM,cAAc,EAAE,IAAI,CAAChB,eAAe,CAACe,OAAO;QAC5CE,cAAc,EAAE,IAAI,CAAChB,eAAe,CAACc,OAAO;QAC5CG,aAAa,EAAE,IAAI,CAAChB,iBAAiB,CAACvL;MAC1C,CAAC;MACDwG,OAAO,CAACE,GAAG,CAAC,mBAAmB,CAAC;MAChCF,OAAO,CAACE,GAAG,CAACqG,SAAS,CAAC;MACtBvG,OAAO,CAACE,GAAG,CAAC,gBAAgB,CAAC;MAC7B,IAAIsG,aAAa,GAAGhB,IAAI,CAACiB,SAAS,CAACF,SAAS,CAAC;MAC7CvG,OAAO,CAACE,GAAG,CAACsG,aAAa,CAAC;MAC1BxG,OAAO,CAACE,GAAG,CAAC,wBAAwB,EAAEsE,QAAQ,CAACW,UAAU,CAAC;MAC1DE,YAAY,CAACqB,OAAO,CAAClC,QAAQ,CAACW,UAAU,EAAEqB,aAAa,CAAC;MACxDxG,OAAO,CAACG,QAAQ,CAAC,CAAC;IACtB;EAAC;IAAA5G,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAqB;MACjB,OAAO,IAAI,CAACmL,eAAe,CAACe,OAAO;IACvC;EAAC;IAAArM,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAqB;MACjB,OAAO,IAAI,CAACoL,eAAe,CAACc,OAAO;IACvC;EAAC;IAAArM,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAoB;MAChB,OAAO,IAAI,CAACqL,iBAAiB,CAACvL,KAAK;IACvC;EAAC;IAAAD,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAkB;MACd,OAAOiN,QAAQ,CAAC,IAAI,CAACjC,YAAY,CAAClL,KAAK,CAAC;IAC5C;EAAC;IAAAD,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAe;MACX,OAAOkN,UAAU,CAAC,IAAI,CAACjC,SAAS,CAACnL,KAAK,CAAC;IAC3C;EAAC;IAAAD,GAAA;IAAAC,KAAA,EAED,SAAAqN,UAAUA,CAACC,QAAQ,EAAE;MACjB,IAAI,CAAClC,eAAe,CAACmC,OAAO,GAAGD,QAAQ;MACvCA,QAAQ,CAAC,CAAC;IACd;EAAC;AAAA;AACJE,eAAA,CA7FYxC,QAAQ,gBACG,uBAAuB,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7B/C;AACA;AACA;AACA;AACA;AACA;;AAEO,IAAMyC,KAAK;EACd,SAAAA,MAAYC,OAAO,EAAE;IAAAjO,eAAA,OAAAgO,KAAA;IACjB,IAAI,CAACC,OAAO,GAAGA,OAAO;EAC1B;EAAC,OAAA5N,YAAA,CAAA2N,KAAA;IAAA1N,GAAA;IAAAC,KAAA,EAED,SAAAiB,IAAIA,CAACC,MAAM,EAAE,CAAC;EAAC;IAAAnB,GAAA;IAAAC,KAAA,EAEf,SAAA2N,UAAUA,CAACC,KAAK,EAAE;MACd,OAAOA,KAAK,CAACjO,IAAI,GAAG,IAAI,CAAC+N,OAAO;IACpC;EAAC;AAAA;AAGE,IAAM3H,QAAQ,0BAAA8H,MAAA;EACjB,SAAA9H,SAAY2H,OAAO,EAAElN,GAAG,EAAEsN,GAAG,EAAEpN,GAAG,EAA8B;IAAA,IAAAuJ,KAAA;IAAA,IAA5BnJ,KAAK,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,OAAO;IAAA,IAAEsG,SAAS,GAAAtG,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC;IAAAlB,eAAA,OAAAsG,QAAA;IAC1DkE,KAAA,GAAA8D,UAAA,OAAAhI,QAAA,GAAM2H,OAAO;IACbzD,KAAA,CAAK+D,QAAQ,GAAGxN,GAAG;IACnByJ,KAAA,CAAKgE,SAAS,GAAGH,GAAG;IACpB7D,KAAA,CAAKjD,MAAM,GAAGtG,GAAG;IACjBuJ,KAAA,CAAKnJ,KAAK,GAAGA,KAAK;IAClBmJ,KAAA,CAAKhD,SAAS,GAAGA,SAAS;IAAA,OAAAgD,KAAA;EAC9B;EAACiE,SAAA,CAAAnI,QAAA,EAAA8H,MAAA;EAAA,OAAA/N,YAAA,CAAAiG,QAAA;IAAAhG,GAAA;IAAAC,KAAA,EAED,SAAAiB,IAAIA,CAACC,MAAM,EAAE;MACTA,MAAM,CAACiN,OAAO,CAAC,IAAI,CAACH,QAAQ,EACxB,IAAI,CAACC,SAAS,CAAC3G,IAAI,EAAE,IAAI,CAACN,MAAM,EAChC,IAAI,CAAClG,KAAK,EAAE,IAAI,CAACmG,SAAS,CAAC;IACnC;EAAC;AAAA,EAdyBwG,KAAK;AAiB5B,IAAM3H,SAAS,0BAAAsI,OAAA;EAClB,SAAAtI,UAAY4H,OAAO,EAAE/K,KAAK,EAAE0L,GAAG,EAA8B;IAAA,IAAAC,MAAA;IAAA,IAA5BxN,KAAK,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,OAAO;IAAA,IAAEsG,SAAS,GAAAtG,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC;IAAAlB,eAAA,OAAAqG,SAAA;IACvDwI,MAAA,GAAAP,UAAA,OAAAjI,SAAA,GAAM4H,OAAO;IACbY,MAAA,CAAK3L,KAAK,GAAGA,KAAK;IAClB2L,MAAA,CAAKD,GAAG,GAAGA,GAAG;IACdC,MAAA,CAAKxN,KAAK,GAAGA,KAAK;IAClBwN,MAAA,CAAKrH,SAAS,GAAGA,SAAS;IAAA,OAAAqH,MAAA;EAC9B;EAACJ,SAAA,CAAApI,SAAA,EAAAsI,OAAA;EAAA,OAAAtO,YAAA,CAAAgG,SAAA;IAAA/F,GAAA;IAAAC,KAAA,EAED,SAAAiB,IAAIA,CAACC,MAAM,EAAE;MACTA,MAAM,CAACqN,QAAQ,CAAC,IAAI,CAAC5L,KAAK,EAAE,IAAI,CAAC0L,GAAG,EAAE,IAAI,CAACvN,KAAK,CAAC;IACrD;EAAC;AAAA,EAX0B2M,KAAK;AAc7B,IAAMe,WAAW,0BAAAC,OAAA;EACpB,SAAAD,YAAYd,OAAO,EAAElN,GAAG,EAAEwG,MAAM,EAAiB;IAAA,IAAA0H,MAAA;IAAA,IAAf5N,KAAK,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,OAAO;IAAAlB,eAAA,OAAA+O,WAAA;IAC3CE,MAAA,GAAAX,UAAA,OAAAS,WAAA,GAAMd,OAAO;IACbgB,MAAA,CAAKlO,GAAG,GAAGA,GAAG;IACdkO,MAAA,CAAK1H,MAAM,GAAGA,MAAM;IACpB0H,MAAA,CAAK5N,KAAK,GAAGA,KAAK;IAAA,OAAA4N,MAAA;EACtB;EAACR,SAAA,CAAAM,WAAA,EAAAC,OAAA;EAAA,OAAA3O,YAAA,CAAA0O,WAAA;IAAAzO,GAAA;IAAAC,KAAA,EAED,SAAAiB,IAAIA,CAACC,MAAM,EAAE;MACTA,MAAM,CAACC,UAAU,CAAC,IAAI,CAACX,GAAG,EAAE,IAAI,CAACwG,MAAM,EAAE,IAAI,CAAClG,KAAK,CAAC;IACxD;EAAC;AAAA,EAV4B2M,KAAK;AAa/B,IAAMjF,SAAS,0BAAAmG,OAAA;EAClB,SAAAnG,UAAYkF,OAAO,EAAE3L,IAAI,EAAiB;IAAA,IAAA6M,MAAA;IAAA,IAAf9N,KAAK,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,OAAO;IAAAlB,eAAA,OAAA+I,SAAA;IACpCoG,MAAA,GAAAb,UAAA,OAAAvF,SAAA,GAAMkF,OAAO;IACbkB,MAAA,CAAK7M,IAAI,GAAGA,IAAI;IAChB6M,MAAA,CAAK9N,KAAK,GAAGA,KAAK;IAAA,OAAA8N,MAAA;EACtB;EAACV,SAAA,CAAA1F,SAAA,EAAAmG,OAAA;EAAA,OAAA7O,YAAA,CAAA0I,SAAA;IAAAzI,GAAA;IAAAC,KAAA,EAED,SAAAiB,IAAIA,CAACC,MAAM,EAAE;MACTA,MAAM,CAAC2N,QAAQ,CAAC,IAAI,CAAC9M,IAAI,EAAE,IAAI,CAACjB,KAAK,CAAC;IAC1C;EAAC;AAAA,EAT0B2M,KAAK,E;;;;;;;;;;;;;;;;;;;;;;;AC/DpC;AACA;AACA;AACA;AACA;AACA;AACmC;AACK;;AAExC;AACA;AACA;AACO,IAAMqB,QAAQ,gBAAAhP,YAAA;AACjB;AACJ;AACA;AACA;AACA;AACA;AACI,SAAAgP,SAAYtO,GAAG,EAAE+F,IAAI,EAAE;EAAA9G,eAAA,OAAAqP,QAAA;EACnB,IAAI,CAACtO,GAAG,GAAGA,GAAG;EACd,IAAI,CAAC+F,IAAI,GAAGA,IAAI;AACpB,CAAC;;AAGL;AACA;AACA;AAFA,IAGqBwI,MAAM;EACvB,SAAAA,OAAYC,GAAG,EAAE;IAAAvP,eAAA,OAAAsP,MAAA;IACb,IAAI,CAACC,GAAG,GAAGA,GAAG;EAClB;EAAC,OAAAlP,YAAA,CAAAiP,MAAA;IAAAhP,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAQ;MACJ,OAAO,IAAI,CAAC8O,GAAG,CAACC,MAAM,CAACC,KAAK,GAAC,CAAC;IAClC;EAAC;IAAAnP,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAQ;MACJ,OAAO,IAAI,CAAC8O,GAAG,CAACC,MAAM,CAACE,MAAM,GAAC,CAAC;IACnC;EAAC;IAAApP,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAQ;MACJ,OAAO,IAAI,CAAC8O,GAAG,CAACC,MAAM,CAACC,KAAK;IAChC;EAAC;IAAAnP,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAQ;MACJ,OAAO,IAAI,CAAC8O,GAAG,CAACC,MAAM,CAACE,MAAM;IACjC;EAAC;IAAApP,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAiB;MACb,OAAO,CACH,IAAI4O,QAAQ,CAAC,IAAIxN,oDAAM,CAAC,CAAC,EAAE,IAAI,CAAC8N,CAAC,CAAC,EAAE,IAAI9N,oDAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EACtD,IAAIwN,QAAQ,CAAC,IAAIxN,oDAAM,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC8N,CAAC,CAAC,EAAE,IAAI9N,oDAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EACtD,IAAIwN,QAAQ,CAAC,IAAIxN,oDAAM,CAAC,IAAI,CAAC+N,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI/N,oDAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EACtD,IAAIwN,QAAQ,CAAC,IAAIxN,oDAAM,CAAC,CAAC,IAAI,CAAC+N,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI/N,oDAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CACzD;IACL;EAAC;IAAAvB,GAAA;IAAAG,GAAA,EAED,SAAAA,IAAA,EAAgB;MACZ,OAAO,IAAII,gDAAI,CACX,CAAC,IAAI,CAAC+O,CAAC,EAAE,IAAI,CAACA,CAAC,EACf,CAAC,IAAI,CAACD,CAAC,EAAE,IAAI,CAACA,CAClB,CAAC;IACL;EAAC;IAAArP,GAAA;IAAAC,KAAA,EAED,SAAAsP,QAAQA,CAACvK,CAAC,EAAE;MACR,OAAO,IAAIzD,oDAAM,CAAC,IAAI,CAAC+N,CAAC,GAAGtK,CAAC,CAAChE,CAAC,EAAE,IAAI,CAACqO,CAAC,GAAGrK,CAAC,CAAC/D,CAAC,CAAC;IACjD;EAAC;IAAAjB,GAAA;IAAAC,KAAA,EAED,SAAAuP,KAAKA,CAAA,EAAG;MACJ,IAAI,CAACP,GAAG,CAACQ,SAAS,CACd,CAAC,EAAE,CAAC,EACJ,IAAI,CAACR,GAAG,CAACC,MAAM,CAACC,KAAK,EACrB,IAAI,CAACF,GAAG,CAACC,MAAM,CAACE,MAAM,CAAC;IAC/B;EAAC;IAAApP,GAAA;IAAAC,KAAA,EAED,SAAAuO,QAAQA,CAACkB,EAAE,EAAEC,EAAE,EAAE5O,KAAK,EAAW;MAAA,IAAToO,KAAK,GAAAvO,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC;MAC3B,IAAIgP,EAAE,GAAG,IAAI,CAACL,QAAQ,CAACG,EAAE,CAAC;MAC1B,IAAIG,EAAE,GAAG,IAAI,CAACN,QAAQ,CAACI,EAAE,CAAC;MAC1B,IAAI,CAACV,GAAG,CAACa,WAAW,GAAG/O,KAAK;MAC5B,IAAI,CAACkO,GAAG,CAACc,SAAS,GAAGZ,KAAK;MAC1B,IAAI,CAACF,GAAG,CAACe,SAAS,CAAC,CAAC;MACpB,IAAI,CAACf,GAAG,CAACgB,MAAM,CAACL,EAAE,CAAC5O,CAAC,EAAE4O,EAAE,CAAC3O,CAAC,CAAC;MAC3B,IAAI,CAACgO,GAAG,CAACiB,MAAM,CAACL,EAAE,CAAC7O,CAAC,EAAE6O,EAAE,CAAC5O,CAAC,CAAC;MAC3B,IAAI,CAACgO,GAAG,CAACkB,MAAM,CAAC,CAAC;IACrB;EAAC;IAAAnQ,GAAA;IAAAC,KAAA,EAED,SAAAmO,OAAOA,CAACgC,CAAC,EAAEC,CAAC,EAAEC,CAAC,EAAEvP,KAAK,EAAW;MAAA,IAAToO,KAAK,GAAAvO,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,CAAC;MAC3B,IAAI2P,CAAC,GAAGH,CAAC,CAAC9O,GAAG,CAAC+O,CAAC,CAACjM,KAAK,CAACkM,CAAC,CAAC,CAAC;MACzB,IAAI,CAAC9B,QAAQ,CAAC4B,CAAC,EAAEG,CAAC,EAAExP,KAAK,EAAEoO,KAAK,CAAC;IACrC;EAAC;IAAAnP,GAAA;IAAAC,KAAA,EAED,SAAAmB,UAAUA,CAACX,GAAG,EAAEE,GAAG,EAAmB;MAAA,IAAjBI,KAAK,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,SAAS;MAChC,IAAI4P,IAAI,GAAG,IAAI,CAACjB,QAAQ,CAAC9O,GAAG,CAAC;MAC7B,IAAI,CAACwO,GAAG,CAACwB,SAAS,GAAG1P,KAAK;MAC1B,IAAI,CAACkO,GAAG,CAACc,SAAS,GAAG,CAAC;MACtB,IAAI,CAACd,GAAG,CAACe,SAAS,CAAC,CAAC;MACpB,IAAI,CAACf,GAAG,CAACyB,GAAG,CAACF,IAAI,CAACxP,CAAC,EAAEwP,IAAI,CAACvP,CAAC,EAAEN,GAAG,EAAE,CAAC,EAAE,CAAC,GAACP,IAAI,CAACuQ,EAAE,CAAC;MAC/C,IAAI,CAAC1B,GAAG,CAAC2B,IAAI,CAAC,CAAC;IACnB;EAAC;IAAA5Q,GAAA;IAAAC,KAAA,EAED,SAAA6O,QAAQA,CAAC9M,IAAI,EAAmB;MAAA,IAAjBjB,KAAK,GAAAH,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAC,SAAS;MAC1B,IAAIiQ,EAAE,GAAG,IAAI,CAACtB,QAAQ,CAACvN,IAAI,CAAC8O,IAAI,CAAC;MACjC,IAAIC,EAAE,GAAG,IAAI,CAACxB,QAAQ,CAACvN,IAAI,CAACgP,IAAI,CAAC;MACjC,IAAI,CAAC/B,GAAG,CAACa,WAAW,GAAG/O,KAAK;MAC5B,IAAI,CAACkO,GAAG,CAACc,SAAS,GAAG,CAAC;MACtB,IAAI,CAACd,GAAG,CAACe,SAAS,CAAC,CAAC;MACpB,IAAI,CAACf,GAAG,CAACjN,IAAI,CAAC6O,EAAE,CAAC7P,CAAC,EAAE6P,EAAE,CAAC5P,CAAC,EAAE8P,EAAE,CAAC/P,CAAC,GAAG6P,EAAE,CAAC7P,CAAC,EAAE+P,EAAE,CAAC9P,CAAC,GAAG4P,EAAE,CAAC5P,CAAC,CAAC;MACnD,IAAI,CAACgO,GAAG,CAACkB,MAAM,CAAC,CAAC;IACrB;EAAC;AAAA;;;;;;;;;;;;;;;;;;;;;AC7GL;AACA;AACA;AACA;AACA;AACA;;AAGO,IAAMc,KAAK;EACd,SAAAA,MAAA,EAAc;IAAAvR,eAAA,OAAAuR,KAAA;IACV,IAAI,CAACC,gBAAgB,GAAG9G,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;IACxD,IAAI,CAAC8G,eAAe,GAAG/G,QAAQ,CAACC,aAAa,CAAC,YAAY,CAAC;IAC3D,IAAI,CAAC+G,SAAS,GAAGhH,QAAQ,CAACC,aAAa,CAAC,MAAM,CAAC;EACnD;EAAC,OAAAtK,YAAA,CAAAkR,KAAA;IAAAjR,GAAA;IAAAqR,GAAA,EAED,SAAAA,IAAepR,KAAK,EAAE;MAClB,IAAI,CAACiR,gBAAgB,CAACI,SAAS,MAAA5L,MAAA,CAAMzF,KAAK,OAAI;IAClD;EAAC;IAAAD,GAAA;IAAAqR,GAAA,EAED,SAAAA,IAAcpR,KAAK,EAAE;MACjB,IAAI,CAACkR,eAAe,CAACG,SAAS,MAAA5L,MAAA,CAAMzF,KAAK,CAAE;IAC/C;EAAC;IAAAD,GAAA;IAAAqR,GAAA,EAED,SAAAA,IAAQpR,KAAK,EAAE;MACX,IAAI,CAACmR,SAAS,CAACE,SAAS,MAAA5L,MAAA,CAAMzF,KAAK,CAAE;IACzC;EAAC;AAAA,I;;;;;;;;;;;;;;;;;ACzBuF;AAC5F,YAAiK;;AAEjK;;AAEA;AACA;;AAEA,aAAa,0GAAG,CAAC,mJAAO;;;;AAIxB,iEAAe,mJAAO,aAAa,E;;;;;;;;;;;;;;;;;;ACZnC;AACyH;AAC7B;AAC5F,8BAA8B,mFAA2B,CAAC,wGAAqC;AAC/F;AACA,6IAA6I,mEAAmE,GAAG,UAAU,cAAc,2BAA2B,iBAAiB,GAAG,OAAO,mBAAmB,0BAA0B,GAAG,eAAe,mBAAmB,GAAG,UAAU,uBAAuB,iBAAiB,GAAG,WAAW,kBAAkB,wBAAwB,sBAAsB,iBAAiB,0CAA0C,wCAAwC,8DAA8D,GAAG,wCAAwC,WAAW,iCAAiC,6DAA6D,KAAK,GAAG,aAAa,gBAAgB,2BAA2B,sBAAsB,GAAG,OAAO,0FAA0F,KAAK,KAAK,WAAW,MAAM,KAAK,UAAU,WAAW,UAAU,MAAM,KAAK,UAAU,WAAW,MAAM,KAAK,UAAU,MAAM,KAAK,WAAW,UAAU,MAAM,KAAK,UAAU,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,KAAK,KAAK,KAAK,WAAW,WAAW,KAAK,MAAM,KAAK,UAAU,WAAW,WAAW,sBAAsB;AAC1zC;AACA,iEAAe,uBAAuB,EAAC;;;;;;;;;;;ACP1B;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA,4CAA4C,qBAAqB;AACjE;;AAEA;AACA,KAAK;AACL,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,sBAAsB,iBAAiB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,qBAAqB,qBAAqB;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,E;;;;;;;;;;ACjEa;;AAEb,kCAAkC;;AAElC,8BAA8B;;AAE9B,kDAAkD,gBAAgB,gEAAgE,wDAAwD,6DAA6D,sDAAsD;;AAE7S,uCAAuC,uDAAuD,uCAAuC,SAAS,OAAO,oBAAoB;;AAEzK,yCAAyC,8FAA8F,wBAAwB,eAAe,eAAe,gBAAgB,YAAY,MAAM,wBAAwB,+BAA+B,aAAa,qBAAqB,uCAAuC,cAAc,WAAW,YAAY,UAAU,MAAM,mDAAmD,UAAU,sBAAsB;;AAEve,gCAAgC;;AAEhC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,uDAAuD,cAAc;AACrE;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,E;;;;;;;;;;ACnCa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;;AAEA,kBAAkB,wBAAwB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAwC,GAAG,sBAAiB,GAAG,CAAI;;AAEnF;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,qEAAqE,qBAAqB,cAAc;;AAExG;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;;AAEJ;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;;AAEA,qBAAqB,6BAA6B;AAClD;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,E;;;;;;UC5QA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D,E;;;;;WCNA,mC;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;A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","sources":["webpack://collision-detection/./app/code/clock.js","webpack://collision-detection/./app/code/geometry/ball.js","webpack://collision-detection/./app/code/geometry/rect.js","webpack://collision-detection/./app/code/math/array.js","webpack://collision-detection/./app/code/math/matrix.js","webpack://collision-detection/./app/code/math/vector.js","webpack://collision-detection/./app/code/physics/collision.js","webpack://collision-detection/./app/code/physics/partitioning.js","webpack://collision-detection/./app/code/ui/controls.js","webpack://collision-detection/./app/code/ui/gizmos.js","webpack://collision-detection/./app/code/ui/screen.js","webpack://collision-detection/./app/code/ui/stats.js","webpack://collision-detection/./app/style/main.scss?a49a","webpack://collision-detection/./app/style/main.scss","webpack://collision-detection/./node_modules/css-loader/dist/runtime/api.js","webpack://collision-detection/./node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://collision-detection/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://collision-detection/webpack/bootstrap","webpack://collision-detection/webpack/runtime/compat get default export","webpack://collision-detection/webpack/runtime/define property getters","webpack://collision-detection/webpack/runtime/hasOwnProperty shorthand","webpack://collision-detection/webpack/runtime/make namespace object","webpack://collision-detection/webpack/runtime/nonce","webpack://collision-detection/./app/index.js"],"sourcesContent":["/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\n\nexport class Clock {\n    constructor() {\n        this.last = null\n        this.time = Date.now()\n    }\n\n    tick() {\n        this.last = this.time\n        this.time = Date.now()\n    }\n\n    get delta() {\n        return this.time - this.last\n    }\n\n    get framerate() {\n        return Math.floor(1000/this.delta)\n    }\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\nimport { Rect } from './rect'\n\n/**\n * Spherical particle\n */\nexport class Ball {\n    /**\n     * Construct ball\n     * \n     * @param {Vector} pos position of ball\n     * @param {Vector} vel velocity of vall\n     * @param {float} rad radius of ball\n     */\n    constructor(pos, vel, rad=20, color='#ffffff') {\n        this.pos = pos\n        this.vel = vel\n        this.rad = rad\n        this.color = color\n    }\n\n    /**\n     * Get bounding box\n     */\n    get boundingBox() {\n        return new Rect(\n            this.pos.x - this.rad,\n            this.pos.x + this.rad,\n            this.pos.y - this.rad,\n            this.pos.y + this.rad\n        )\n    }\n\n    /**\n     * Mass is 1/10 the radius\n     */\n    get mass() {\n        return this.rad / 10\n    }\n\n    /**\n     * Draw to screen\n     * \n     * @param {Screen} screen screen to draw to\n     */\n    draw(screen) {\n        screen.drawCircle(this.pos, this.rad, this.color)\n    }\n\n    /**\n     * Update position of ball based on velocity\n     */\n    update() {\n        this.pos = this.pos.add(this.vel)\n    }\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\nimport Vector from \"../math/vector\"\nimport { numberRange, permutations, linearBreaks } from '../math/array';\n\n/**\n * Generic rectangle\n */\nexport class Rect {\n    constructor(x0, x1, y0, y1) {\n        this.x0 = x0\n        this.x1 = x1\n        this.y0 = y0\n        this.y1 = y1\n    }\n\n    overlaps(rect) {\n        return (this.x0 < rect.x1 && rect.x0 <= this.x1)\n            && (this.y0 < rect.y1 && rect.y0 <= this.y1)\n    }\n\n    get pos0() {\n        return new Vector(this.x0, this.y0)\n    }\n\n    get pos1() {\n        return new Vector(this.x1, this.y1)\n    }\n\n    get center() {\n        let { x0, x1, y0, y1 } = this\n        return new Vector((x0+x1)/2, (y0+y1)/2)\n    }\n\n    partition(columns, rows) {\n        let columnBreaks = linearBreaks(this.x0, this.x1, columns + 1)\n        let rowBreaks = linearBreaks(this.y0, this.y1, rows + 1)\n        return permutations(\n                numberRange(columnBreaks.length - 1),\n                numberRange(rowBreaks.length - 1)\n            )\n            .map(([i, j]) => new Rect(\n                columnBreaks[i],\n                columnBreaks[i + 1],\n                rowBreaks[j],\n                rowBreaks[j + 1]\n            ))\n    }\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\n\n/**\n * Return range of numbers from start to stop in increments of step\n * \n * @param {int} start start (or stop) of range (start defaults to 0 if not specified)\n * @param {int} stop final number of range\n * @param {int} step increment step\n */\nexport function numberRange(start, stop=undefined, step=1) {\n    if (stop === undefined) {\n        stop = start\n        start = 0\n    }\n    return Array.from(\n        { length: Math.ceil((stop - start)/step) },\n        (_, i) => start + i*step)\n}\n\n/**\n * Generate pairs of items so that no to items \n * appear more than once as a pair in either order\n * \n * @param {Array} items items to pair up\n * \n * @returns unique pairs of items\n */\nexport function uniquePairs(items) {\n    return items.flatMap((a, i) => items.slice(i+1).map(b => [a, b]))\n}\n\n/**\n * Return array containing all permutations of items in each array\n * \n * @param {Array} array1 first array to pair up\n * @param {Array} array2 second array to pair up\n * \n * @returns pairs of arrays \n */\nexport function permutations(array1, array2) {\n    return array1.flatMap(e1 => array2.map(e2 => [e1, e2]))\n}\n\n/**\n * Return array of n breakpoints linearly between \n * start and stop index including stop index\n * \n * @param {int} start starting integer index\n * @param {int} stop ending integer index\n * @param {int} n number of breaks\n * \n * @returns {Array} array of breakpoints\n */\nexport function linearBreaks(start, stop, n) {\n    let step = (stop - start)/(n - 1)\n    return Array.from({ length: n }, (_, i) => start + step*i)\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\nimport Vector from './vector'\n\n/**\n * Transformation matrix\n */\nexport default class Matrix {\n    /**\n     * Construct matrix\n     * \n     * @param {float} xx xx component of Matrix \n     * @param {float} xy xy component of Matrix \n     * @param {float} yx yx component of Matrix \n     * @param {float} yy yy component of Matrix \n     */\n    constructor(xx, xy, yx, yy) {\n        this.xx = xx\n        this.xy = xy\n        this.yx = yx\n        this.yy = yy\n    }\n\n    /**\n     * Add other matrix\n     * \n     * @param {Matrix} other other component to add\n     * \n     * @returns result of addition\n     */\n    add(other) {\n        return new Matrix(\n            this.xx + other.xx,\n            this.xy + other.xy,\n            this.yx + other.yx,\n            this.yy + other.yy,\n        )\n    }\n\n    /**\n     * Scale by scalar\n     * \n     * @param {float} scalar scalar quantity to multiply\n     * \n     * @returns result of scale\n     */\n    scale(scalar) {\n        return new Matrix(\n            this.xx * scalar,\n            this.xy * scalar,\n            this.yx * scalar,\n            this.yy * scalar\n        )\n    }\n\n    /**\n     * Transform vector\n     * \n     * @param {Vector} vect vector to transform\n     * \n     * @returns transformed vector\n     */\n    transform(vect) {\n        return new Vector(\n            this.xx*vect.x + this.xy*vect.y,\n            this.yx*vect.x + this.yy*vect.y\n        )\n    }\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\n\n/**\n * Generate random number between minimum and maximum\n * \n * @param {float} m minimum\n * @param {float} x maximum\n * \n * @returns Random number\n */\nexport const random = (m, x) => m + Math.random()*(x - m)\n\n/**\n * Generate random number biased based on bias value\n * \n * @param {float} m minimum\n * @param {float} x maximum\n * @param {float} bias bias value (0 to 1)\n * @param {int} roundToNearest if non-negative integer, decimal place to round to\n * \n * @returns Random biased number\n */\nexport function randomWithBias(m, x, bias=0, roundToNearest=undefined) {\n    let k = Math.pow(1 - bias, 3)\n    let r = Math.random()\n    let g = (r*k)/(r*k - r + 1)\n    let result = m + g*(x - m)\n    if (roundToNearest >= 0) {\n        let decimal = Math.pow(10, roundToNearest)\n        result = Math.round(result * decimal) / decimal\n    }\n    return result\n}\n\n/**\n * 2D vector\n */\nexport default class Vector {\n    /**\n     * Construct vector\n     * \n     * @param {float} x x component\n     * @param {float} y y component\n     */\n    constructor(x, y) {\n        this.x = x\n        this.y = y\n    }\n\n    /**\n     * Vector magnitude\n     */\n    get magnitude() {\n        return Math.sqrt(this.dot(this))\n    }\n\n    /**\n     * Unit vector\n     */\n    get unit() {\n        return this.scale(1/this.magnitude)\n    }\n\n    /**\n     * Add other vector\n     * \n     * @param {Vector} other other vector to add\n     * \n     * @returns result of vector addition\n     */\n    add(other) {\n        return new Vector(this.x + other.x, this.y + other.y)\n    }\n\n    /**\n     * Multiply vector by scalar\n     * \n     * @param {float} scalar scalar value to multiply\n     * \n     * @returns result of vector scaling\n     */\n    scale(scalar) {\n        return new Vector(this.x * scalar, this.y * scalar)\n    }\n\n    /**\n     * Subtract other vector\n     * \n     * @param {Vector} other other vector to subtract\n     * \n     * @returns result of vector subtraction\n     */\n    sub(other) {\n        return other.scale(-1).add(this)\n    }\n\n    /**\n     * Compute dot product of vectors\n     * \n     * @param {Vector} other other vector to in dot product\n     * \n     * @returns result of vector dot product\n     */\n    dot(other) {\n        return this.x*other.x + this.y*other.y\n    }\n\n    /**\n     * Convert Vector to string representation\n     * \n     * @returns string\n     */\n    toString() {\n        return `(${this.x.toFixed(1)}, ${this.y.toFixed(1)})`\n    }\n}\n\n// Zero vector\nVector.ZERO = new Vector(0, 0)\n\n/**\n * Vector whose components are random \n * between respective minima and maxima\n * \n * @param {float} xm minimum x\n * @param {float} xx maximum x\n * @param {float} ym minimum y\n * @param {float} yx maximum y\n * \n * @returns Random vector\n */\nVector.random = (xm, xx, ym, yx) => new Vector(random(xm, xx), random(ym, yx))","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\nimport Vector from '../math/vector'\nimport Matrix from '../math/matrix'\nimport { LineGizmo, RayGizmo } from '../ui/gizmos'\n\n// Time constants\nconst SECONDS = 1000\n\n/**\n * Check boundary collision of ball. Handle intersection\n * correction and velocity reflection\n * \n * @param {Screen} screen screen to draw debug to\n * @param {Boundary} boundary boundary being checked\n * @param {Ball} ball ball being checked\n * @param {int} time current timestamp\n * @param {boolean} debug true if we're debugging\n * @param {Array} gizmos gizmos array\n * \n * @returns true if collided\n */\nexport function boundaryCollision(screen, boundary, ball, time, gizmos, debug=false) {\n    // Distance to boundary\n    let distance = ball.pos.sub(boundary.pos).dot(boundary.norm)\n    if (distance < ball.rad) {\n        if (debug) {\n            console.group('collision')\n            console.log(boundary)\n            console.log(ball)\n            console.groupEnd()\n        }\n        let correction = ball.rad - distance\n        ball.pos = ball.pos.add(boundary.norm.scale(correction))\n        \n        // Velocity reflection\n        let vNormal = boundary.norm.scale(ball.vel.dot(boundary.norm))\n        let vParallel = ball.vel.sub(vNormal)\n        let vFinal = vParallel.sub(vNormal)\n        \n        // Debug collision\n        if (debug) {\n            // Line radius\n            let radius = 20\n            let linewidth = 1\n\n            // Add gizmos\n            gizmos.push(\n                new RayGizmo(time + 1*SECONDS,\n                    ball.pos.sub(boundary.norm.scale(ball.rad)), \n                    ball.vel.scale(-1), radius,\n                    '#0f0', linewidth\n                ),\n                new RayGizmo(time + 1*SECONDS,\n                    ball.pos.sub(boundary.norm.scale(ball.rad)), \n                    vFinal, radius,\n                    '#0f0', linewidth\n                )\n            )\n        }\n\n        // Update velocity\n        ball.vel = vFinal\n        \n        // Ball has collided\n        return true\n    }\n    else {\n        // Ball has not collided\n        return false\n    }\n}\n\n/**\n * Check ball collision. Handle intersection correction\n * and momentum transfer\n * \n * @param {Screen} screen screen to draw debug to\n * @param {Ball} a ball A being checked\n * @param {Ball} b ball B being checked\n * @param {int} time current timestamp\n * @param {Array} gizmos gizmos array\n * @param {boolean} debug true if debugging\n * \n * @returns true if collided\n */\nexport function ballCollision(screen, a, b, time, gizmos, debug=false) {\n    // Difference vector\n    let vectorDifferenceBetweenBalls = b.pos.sub(a.pos)\n\n    // If distance is greater than both radii\n    if (vectorDifferenceBetweenBalls.magnitude < (a.rad + b.rad)) {\n        // First find the collision normals\n        let collisionNormal = vectorDifferenceBetweenBalls.unit\n        let collisionAntinormal = collisionNormal.scale(-1)\n\n        // Correction translation\n        let intersectionCorrectionFactor = ((a.rad + b.rad) - vectorDifferenceBetweenBalls.magnitude)/2\n        let aCorrectedPosition = a.pos\n            .add(collisionAntinormal.scale(intersectionCorrectionFactor))\n        let bCorrectedPosition = b.pos\n            .add(collisionNormal.scale(intersectionCorrectionFactor))\n\n        // Find projections of velocity on normal\n        let aPreCollisionNormalVelocity = collisionNormal\n            .scale(a.vel.dot(collisionNormal))\n        let bPreCollisionAntinormalVelocity = collisionAntinormal\n            .scale(b.vel.dot(collisionAntinormal))\n\n        // Get other components of velocity on parallel\n        let aParallelVelocity = a.vel.sub(aPreCollisionNormalVelocity)\n        let bParallelVelocity = b.vel.sub(bPreCollisionAntinormalVelocity)\n\n        // Momentum exchange using the khan equation\n        let preCollisionVelocityState = new Vector(\n            aPreCollisionNormalVelocity.magnitude,\n            bPreCollisionAntinormalVelocity.magnitude\n        )\n        let khanMatrix = new Matrix(\n            (a.mass - b.mass), 2*b.mass,\n            2*a.mass, (b.mass - a.mass)\n        ).scale(1/(a.mass + b.mass))\n        let postCollisionVelocityState = khanMatrix\n            .transform(preCollisionVelocityState)\n        let aPostCollisionVelocity = collisionNormal\n            .scale(-postCollisionVelocityState.x)\n            .add(aParallelVelocity)\n        let bPostCollisionVelocity = collisionAntinormal\n            .scale(-postCollisionVelocityState.y)\n            .add(bParallelVelocity)\n\n        // Debug collision\n        if (debug) {\n            // Line radius\n            let collisionPlaneLength = 60\n            let radius = 20\n            let linewidth = 1\n\n            // Collision info \n            let collisionCenter = a.pos.add(b.pos).scale(0.5)\n            let collisionParallel = new Vector(-collisionNormal.y, collisionNormal.x)\n\n            // Add gizmos\n            gizmos.push(\n                new LineGizmo(time + 1*SECONDS,\n                    collisionCenter.sub(collisionParallel.scale(collisionPlaneLength/2)),\n                    collisionCenter.add(collisionParallel.scale(collisionPlaneLength/2)),\n                    '#0af', linewidth\n                ),\n                new RayGizmo(time + 1*SECONDS,\n                    collisionCenter, a.vel.scale(-1), radius,\n                    '#0f0', linewidth\n                ),\n                new RayGizmo(time + 1*SECONDS,\n                    collisionCenter, aPostCollisionVelocity, radius,\n                    '#0f0', linewidth\n                ),\n                new RayGizmo(time + 1*SECONDS,\n                    collisionCenter, b.vel.scale(-1), radius,\n                    '#f00', linewidth\n                ),\n                new RayGizmo(time + 1*SECONDS,\n                    collisionCenter, bPostCollisionVelocity, radius,\n                    '#f00', linewidth\n                ),\n            )\n        }\n\n        // Set velocities\n        a.pos = aCorrectedPosition\n        a.vel = aPostCollisionVelocity\n        b.pos = bCorrectedPosition\n        b.vel = bPostCollisionVelocity\n\n        // Return true because the ball collided\n        return true\n    }\n\n    // No ball collision\n    return false\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\nimport { RectGizmo } from \"../ui/gizmos\";\nimport { uniquePairs } from '../math/array';\n\n/**\n * Do not perform any partitioning and return \n * all possible unique pairs\n * \n * @param {Screen} screen screen being mapped over\n * @param {Array} balls balls to find collision checks on\n * @param {int} time current time in ms\n * @param {Array} gizmos gizmos arrays\n * @param {boolean} debug print debug information\n * \n * @returns collision pairs\n */\nexport function noPartitioning(screen, balls, time, gizmos, debug=false) {\n    return uniquePairs(balls)\n}\n\n/**\n * Generate an static partitioning algorithm which partitions\n * balls based on their loose position in a static grid\n * \n * @param {int} columns columns in grid\n * @param {int} rows rows in grid\n * \n * @returns Partition function in grid\n */\nexport function staticPartitioningGrid(rows, columns) {\n    /**\n     * Partition particles based on their positions in the static grid\n     * \n     * @param {Screen} screen screen being mapped over\n     * @param {Array} balls balls to find collision checks on\n     * @param {int} time current time in ms\n     * @param {Array} gizmos gizmos arrays\n     * @param {boolean} debug print debug information\n     * \n     * @returns collision pairs\n     */\n    return function staticPartitioning(screen, balls, time, gizmos, debug=false) {\n        // Create cells\n        let cells = screen.worldRect.partition(columns, rows)\n        if (debug) {\n            gizmos.push(...cells.map(cell =>\n                new RectGizmo(time + 10, cell, '#999')    \n            ))\n        }\n\n        // Find partitions\n        return cells.flatMap(cell =>\n            uniquePairs(\n                balls.filter(ball => \n                    ball.boundingBox.overlaps(cell))\n            )\n        )\n    }\n}\n\n\n/**\n * Generate a dynamic partitioning algorithm which partitions\n * balls based on their loose position in a dynamically allocated grid\n * \n * @param {int} columnFactor column number to subdivide cell by\n * @param {int} rowFactor row number to subdivide cell by\n * @param {int} maxStack maximum stack to recurse into\n * \n * @returns partition function for dynamic grid\n */\nexport function dynamicPartitioningGrid(columnFactor, rowFactor, maxStack=5) {\n    /**\n     * Generate a dynamic grid and find collisions\n     * \n     * @param {Screen} screen screen being mapped over\n     * @param {Array} balls balls to find collision checks on\n     * @param {int} time current time in ms\n     * @param {Array} gizmos gizmos arrays\n     * @param {boolean} debug print debug information\n     * \n     * @returns collision pairs\n     */\n    return function dynamicPartitioning(screen, balls, time, gizmos, debug=false) {\n        let recursivePartition = (balls, root, colF=columnFactor, rowF=rowFactor, stack=maxStack) => {\n            // Base conditions\n            if (balls.length < 2) { return [] }\n            if (balls.length === 2 || stack === 0) { return [{ u: balls }] }\n\n            // Partition cells\n            let cells = root.partition(colF, rowF)\n            if (debug) {\n                gizmos.push(...cells.map(cell =>\n                    new RectGizmo(time + 10, cell, '#999')    \n                ))\n            }\n\n            // Subdivide partitions\n            return cells.flatMap(cell =>\n                recursivePartition(\n                    balls.filter(ball => ball.boundingBox.overlaps(cell)),\n                    cell, rowF, colF, stack - 1)\n            )\n        }\n        return recursivePartition(balls, screen.worldRect).map(({u}) => u)\n    }\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\n\nexport class PartitionControl {\n    constructor(options) {\n        this._selectorElement = document.querySelector('#partition-type')\n        this._options = options\n        Object.entries(this._options).forEach(([key, { display }]) => {\n            let option = document.createElement('option')\n            option.setAttribute('value', key)\n            option.textContent = display;\n            this._selectorElement.appendChild(option)\n        })\n    }\n\n    get value() {\n        return this._selectorElement.value\n    }\n\n    get func() {\n        return this._options[this.value].func\n    }\n}\n\nexport class Controls {\n    static storageKey = 'addvscd-setting-state'\n\n    constructor(partitionControl) {\n        this._numberBalls = document.querySelector('#number-balls')\n        this._sizeBias = document.querySelector('#size-bias')\n        this._generateButton = document.querySelector('#generate-balls')\n        this._collisionCheck = document.querySelector('#show-collision')\n        this._partitionCheck = document.querySelector('#show-partitions')\n        this._partitionControl = partitionControl\n\n        // Load from localstorage\n        this.loadStorage()\n        this.initializeSaveStorageCallback()\n    }\n\n    loadStorage() {\n        // Load from localstorage\n        console.groupCollapsed('Load config from local storage')\n        console.log('Checking localstorage for', Controls.storageKey)\n        let savedStateJSON = localStorage.getItem(Controls.storageKey)\n        if (savedStateJSON) {\n            console.log('Loaded data from state')\n            console.log(savedStateJSON)\n            console.log('Parsing data')\n            let savedState = JSON.parse(savedStateJSON)\n            console.log(savedState)\n            this._numberBalls.value = savedState.numberBalls\n            this._sizeBias.value = savedState.sizeBias\n            this._collisionCheck.checked = savedState.collisionCheck\n            this._partitionCheck.checked = savedState.partitionCheck\n            this._partitionControl._selectorElement.value = savedState.partitionType\n        }\n        console.groupEnd()\n    }\n\n    initializeSaveStorageCallback() {\n        let inputs = [\n            this._numberBalls,\n            this._sizeBias,\n            this._generateButton,\n            this._collisionCheck,\n            this._partitionCheck,\n            this._partitionControl._selectorElement\n        ]\n        for (const inp of inputs) {\n            inp.addEventListener('change', this.saveStorage.bind(this))\n        }\n    }\n\n    saveStorage() {\n        console.groupCollapsed('saveStorage')\n        let saveState = {\n            numberBalls: this._numberBalls.value,\n            sizeBias: this._sizeBias.value,\n            collisionCheck: this._collisionCheck.checked,\n            partitionCheck: this._partitionCheck.checked,\n            partitionType: this._partitionControl.value\n        }\n        console.log('State being saved')\n        console.log(saveState)\n        console.log('Saving to json')\n        let saveStateJSON = JSON.stringify(saveState)\n        console.log(saveStateJSON)\n        console.log('Setting to stoage key:', Controls.storageKey)\n        localStorage.setItem(Controls.storageKey, saveStateJSON)\n        console.groupEnd()\n    }\n\n    get showCollisions() {\n        return this._collisionCheck.checked\n    }\n\n    get showPartitions() {\n        return this._partitionCheck.checked\n    }\n\n    get partitionType() {\n        return this._partitionControl.value\n    }\n\n    get numberBalls() {\n        return parseInt(this._numberBalls.value)\n    }\n\n    get sizeBias() {\n        return parseFloat(this._sizeBias.value)\n    }\n\n    onGenerate(callback) {\n        this._generateButton.onclick = callback\n        callback()\n    }\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\n\nexport class Gizmo {\n    constructor(expires) {\n        this.expires = expires\n    }\n\n    draw(screen) {}\n\n    stillvalid(clock) {\n        return clock.time < this.expires\n    }\n}\n\nexport class RayGizmo extends Gizmo {\n    constructor(expires, pos, dir, rad, color='white', linewidth=1) {\n        super(expires)\n        this.position = pos\n        this.direction = dir\n        this.radius = rad\n        this.color = color\n        this.linewidth = linewidth\n    }\n\n    draw(screen) {\n        screen.drawRay(this.position, \n            this.direction.unit, this.radius, \n            this.color, this.linewidth)\n    }\n}\n\nexport class LineGizmo extends Gizmo {\n    constructor(expires, start, end, color='white', linewidth=1) {\n        super(expires)\n        this.start = start\n        this.end = end\n        this.color = color\n        this.linewidth = linewidth\n    }\n\n    draw(screen) {\n        screen.drawLine(this.start, this.end, this.color)\n    }\n}\n\nexport class CircleGizmo extends Gizmo {\n    constructor(expires, pos, radius, color='white') {\n        super(expires)\n        this.pos = pos\n        this.radius = radius\n        this.color = color\n    }\n\n    draw(screen) {\n        screen.drawCircle(this.pos, this.radius, this.color)\n    }\n}\n\nexport class RectGizmo extends Gizmo {\n    constructor(expires, rect, color='white') {\n        super(expires)\n        this.rect = rect\n        this.color = color\n    }\n\n    draw(screen) {\n        screen.drawRect(this.rect, this.color)\n    }\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\nimport Vector from '../math/vector'\nimport { Rect } from '../geometry/rect';\n\n/**\n * Static boundary\n */\nexport class Boundary {\n    /**\n     * Construct boundary\n     * \n     * @param {Vector} pos position of boundary\n     * @param {Vector} norm boundary normal\n     */\n    constructor(pos, norm) {\n        this.pos = pos\n        this.norm = norm\n    }\n}\n\n/**\n * Render to screen\n */\nexport default class Screen {\n    constructor(ctx) {\n        this.ctx = ctx\n    }\n\n    get X() {\n        return this.ctx.canvas.width/2\n    }\n\n    get Y() {\n        return this.ctx.canvas.height/2\n    }\n\n    get W() {\n        return this.ctx.canvas.width;\n    }\n\n    get H() {\n        return this.ctx.canvas.height;\n    }\n\n    get boundaries() {\n        return [\n            new Boundary(new Vector(0, this.Y), new Vector(0, -1)),\n            new Boundary(new Vector(0, -this.Y), new Vector(0, 1)),\n            new Boundary(new Vector(this.X, 0), new Vector(-1, 0)),\n            new Boundary(new Vector(-this.X, 0), new Vector(1, 0))\n        ]\n    }\n\n    get worldRect() {\n        return new Rect(\n            -this.X, this.X,\n            -this.Y, this.Y\n        )\n    }\n\n    centered(r) {\n        return new Vector(this.X + r.x, this.Y - r.y)\n    }\n\n    clear() {\n        this.ctx.clearRect(\n            0, 0,\n            this.ctx.canvas.width,\n            this.ctx.canvas.height)\n    }\n\n    drawLine(p0, p1, color, width=1) {\n        let t0 = this.centered(p0)\n        let t1 = this.centered(p1)\n        this.ctx.strokeStyle = color\n        this.ctx.lineWidth = width\n        this.ctx.beginPath()\n        this.ctx.moveTo(t0.x, t0.y)\n        this.ctx.lineTo(t1.x, t1.y)\n        this.ctx.stroke()    \n    }\n\n    drawRay(p, d, l, color, width=1) {\n        let s = p.add(d.scale(l))\n        this.drawLine(p, s, color, width)\n    }\n\n    drawCircle(pos, rad, color='#000000') {\n        let trfp = this.centered(pos)\n        this.ctx.fillStyle = color\n        this.ctx.lineWidth = 1\n        this.ctx.beginPath()\n        this.ctx.arc(trfp.x, trfp.y, rad, 0, 2*Math.PI)\n        this.ctx.fill()\n    }\n\n    drawRect(rect, color='#aaaaaa') {\n        let c1 = this.centered(rect.pos0)\n        let c2 = this.centered(rect.pos1)\n        this.ctx.strokeStyle = color\n        this.ctx.lineWidth = 1\n        this.ctx.beginPath()\n        this.ctx.rect(c1.x, c1.y, c2.x - c1.x, c2.y - c1.y)\n        this.ctx.stroke()\n    }\n}","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\n\n\nexport class Stats {\n    constructor() {\n        this._frameDeltaEntry = document.querySelector('#delta')\n        this._framerateEntry = document.querySelector('#framerate')\n        this._cpsEntry = document.querySelector('#cps')\n    }\n\n    set frameDelta(value) {\n        this._frameDeltaEntry.innerHTML = `${value}ms`\n    }\n\n    set framerate(value) {\n        this._framerateEntry.innerHTML = `${value}`\n    }\n\n    set cps(value) {\n        this._cpsEntry.innerHTML = `${value}`\n    }\n}","import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[1].use[2]!./main.scss\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/**\\n * Collision detection\\n * \\n * Author:  Anshul Kharbanda\\n * Created: 4 - 30 - 2021\\n */\\n* {\\n  font-family: \\\"Segoe UI\\\", Tahoma, Geneva, Verdana, sans-serif;\\n}\\n\\nbody {\\n  margin: 0;\\n  background-color: #333;\\n  color: white;\\n}\\n\\na {\\n  color: #00aaff;\\n  text-decoration: none;\\n}\\n\\na::before {\\n  content: \\\">\\\";\\n}\\n\\n#app {\\n  text-align: center;\\n  padding: 4pt;\\n}\\n\\n#grid {\\n  display: grid;\\n  place-items: center;\\n  max-width: 1280px;\\n  margin: auto;\\n  grid-template-columns: repeat(2, 1fr);\\n  grid-template-rows: repeat(2, auto);\\n  grid-template-areas: \\\"canvas canvas\\\" \\\"stats controls\\\";\\n}\\n@media screen and (max-width: 450px) {\\n  #grid {\\n    grid-template-columns: 1fr;\\n    grid-template-areas: \\\"canvas\\\" \\\"stats\\\" \\\"controls\\\";\\n  }\\n}\\n\\n#canvas {\\n  width: 100%;\\n  border: 1px solid #777;\\n  grid-area: canvas;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./app/style/main.scss\"],\"names\":[],\"mappings\":\"AAAA;;;;;EAAA;AAMA;EACI,4DAAA;AACJ;;AAIA;EACI,SAAA;EACA,sBAAA;EACA,YAAA;AADJ;;AAIA;EACI,cAAA;EACA,qBAAA;AADJ;;AAGA;EACI,YAAA;AAAJ;;AAGA;EACI,kBAAA;EACA,YAAA;AAAJ;;AAGA;EACI,aAAA;EACA,mBAAA;EACA,iBAAA;EACA,YAAA;EACA,qCAAA;EACA,mCAAA;EACA,qDACI;AADR;AAGI;EAVJ;IAWQ,0BAAA;IACA,gDACI;EADV;AACF;;AAMA;EACI,WAAA;EACA,sBAAA;EACA,iBAAA;AAHJ\",\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","/**\n * Collision detection\n * \n * Author:  Anshul Kharbanda\n * Created: 4 - 30 - 2021\n */\nimport './style/main.scss'\nimport { Ball } from './code/geometry/ball'\nimport Vector, { randomWithBias } from './code/math/vector'\nimport { boundaryCollision, ballCollision } from './code/physics/collision'\nimport * as partitonTypes from './code/physics/partitioning'\nimport Screen from './code/ui/screen'\nimport { LineGizmo } from './code/ui/gizmos'\nimport { Controls, PartitionControl } from './code/ui/controls';\nimport { Stats } from './code/ui/stats';\nimport { Clock } from './code/clock';\nimport { permutations } from './code/math/array'\n\n// Color palette for balls\nconst ballColors = [\n    'cyan', \n    'lime', \n    'coral',\n    'yellow', \n    'violet', \n    'white'\n]\n\n// Controls for updating simulation\nlet partitions = new PartitionControl({\n    'none': {\n        display: 'No Partitioning',\n        func: partitonTypes.noPartitioning\n    },\n    'even-grid-3-5':{\n        display: 'Even Grid 3x5',\n        func: partitonTypes.staticPartitioningGrid(3, 5)\n    },\n    'even-grid-6-10': {\n        display: 'Even Grid 6x10',\n        func: partitonTypes.staticPartitioningGrid(6, 10)\n    },\n    'dynamic-grid-2-2': {\n        display: 'Dynamic Grid 2x2',\n        func: partitonTypes.dynamicPartitioningGrid(2, 2)\n    },\n    'dynamic-grid-3-2': {\n        display: 'Dynamic Grid 3x2',\n        func: partitonTypes.dynamicPartitioningGrid(3, 2)\n    }\n})\nlet controls = new Controls(partitions)\n\n// Simulation stats\nlet stats = new Stats()\n\n// Simulation screen\nlet canvas = document.getElementById('canvas')\nlet ctx = canvas.getContext('2d')\nlet screen = new Screen(ctx)\nlet clock = new Clock()\n\n/**\n * Initialize balls and boundaries\n * \n * @param {int} number number of balls to generate\n * @param {float} bias (0 to 1) bias towards bigger (0) or smaller (1) balls\n * \n * @returns balls and boundaries generated\n */\nfunction genearateBalls(number, bias) {\n    console.groupCollapsed('genearateBalls')\n    let balls = Array.from({ length: number}, (_,i) => {\n        let ball = new Ball(\n            Vector.random(-300, 300, -300, 300),\n            Vector.random(-5, 5, -5, 5),\n            randomWithBias(5, 30, bias, 0),\n            ballColors[i % ballColors.length]\n        )\n        console.log(ball)\n        return ball\n    })\n    console.groupEnd()\n    return balls\n}\n\n\n// Initialize game environment stuff\nlet gizmos = []\nlet balls = []\ncontrols.onGenerate(() => {\n    balls = genearateBalls(controls.numberBalls, controls.sizeBias)\n})\n\n// Buffer to hold current collision checks\nlet nChecks = 0\n\n// Update render time on an interval\nsetInterval(() => {\n    // Update frame stats\n    stats.frameDelta = clock.delta\n    stats.framerate = clock.framerate\n\n    // Update collision stats\n    stats.cps = balls.length * screen.boundaries.length + nChecks\n}, 1000)\n\n/**\n * Runs each animation loop\n */\nrequestAnimationFrame(function loop() {\n    // Environment and controls\n    clock.tick()\n\n    // Physics update step\n    balls.forEach(ball => ball.update())\n    \n    // Boundary collision detection\n    permutations(balls, screen.boundaries).forEach(([ball, boundary]) => {\n        boundaryCollision(screen, boundary, ball, clock.time, gizmos, controls.showCollisions)\n    })\n    \n    // Use partition algorithm to get possible collision checks\n    let collisions = partitions.func(screen, \n        balls, clock.time, \n        gizmos, controls.showPartitions)\n    nChecks = collisions.length\n\n    // Check collisions\n    collisions.forEach(([a, b]) => {\n        if (controls.showPartitions) {\n            gizmos.push(new LineGizmo(clock.time + 10, a.pos, b.pos))\n        }\n        ballCollision(screen, a, b, clock.time, gizmos, controls.showCollisions)\n    })\n\n    // Render step\n    screen.clear()\n    gizmos = gizmos.filter(g => g.stillvalid(clock))\n    gizmos.forEach(gizmo => gizmo.draw(screen))\n    balls.forEach(ball => ball.draw(screen))\n\n    // Reloop\n    requestAnimationFrame(loop)\n})"],"names":["Clock","_classCallCheck","last","time","Date","now","_createClass","key","value","tick","get","Math","floor","delta","Rect","Ball","pos","vel","rad","arguments","length","undefined","color","x","y","draw","screen","drawCircle","update","add","Vector","numberRange","permutations","linearBreaks","x0","x1","y0","y1","overlaps","rect","partition","columns","rows","columnBreaks","rowBreaks","map","_ref","_ref2","_slicedToArray","i","j","start","stop","step","Array","from","ceil","_","uniquePairs","items","flatMap","a","slice","b","array1","array2","e1","e2","n","Matrix","xx","xy","yx","yy","other","scale","scalar","transform","vect","default","random","m","randomWithBias","bias","roundToNearest","k","pow","r","g","result","decimal","round","sqrt","dot","magnitude","sub","toString","concat","toFixed","ZERO","xm","ym","LineGizmo","RayGizmo","SECONDS","boundaryCollision","boundary","ball","gizmos","debug","distance","norm","console","group","log","groupEnd","correction","vNormal","vParallel","vFinal","radius","linewidth","push","ballCollision","vectorDifferenceBetweenBalls","collisionNormal","unit","collisionAntinormal","intersectionCorrectionFactor","aCorrectedPosition","bCorrectedPosition","aPreCollisionNormalVelocity","bPreCollisionAntinormalVelocity","aParallelVelocity","bParallelVelocity","preCollisionVelocityState","khanMatrix","mass","postCollisionVelocityState","aPostCollisionVelocity","bPostCollisionVelocity","collisionPlaneLength","collisionCenter","collisionParallel","RectGizmo","noPartitioning","balls","staticPartitioningGrid","staticPartitioning","cells","worldRect","apply","_toConsumableArray","cell","filter","boundingBox","dynamicPartitioningGrid","columnFactor","rowFactor","maxStack","dynamicPartitioning","recursivePartition","root","colF","rowF","stack","u","PartitionControl","options","_this","_selectorElement","document","querySelector","_options","Object","entries","forEach","display","option","createElement","setAttribute","textContent","appendChild","func","Controls","partitionControl","_numberBalls","_sizeBias","_generateButton","_collisionCheck","_partitionCheck","_partitionControl","loadStorage","initializeSaveStorageCallback","groupCollapsed","storageKey","savedStateJSON","localStorage","getItem","savedState","JSON","parse","numberBalls","sizeBias","checked","collisionCheck","partitionCheck","partitionType","inputs","_i","_inputs","inp","addEventListener","saveStorage","bind","saveState","saveStateJSON","stringify","setItem","parseInt","parseFloat","onGenerate","callback","onclick","_defineProperty","Gizmo","expires","stillvalid","clock","_Gizmo","dir","_callSuper","position","direction","_inherits","drawRay","_Gizmo2","end","_this2","drawLine","CircleGizmo","_Gizmo3","_this3","_Gizmo4","_this4","drawRect","Boundary","Screen","ctx","canvas","width","height","Y","X","centered","clear","clearRect","p0","p1","t0","t1","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","p","d","l","s","trfp","fillStyle","arc","PI","fill","c1","pos0","c2","pos1","Stats","_frameDeltaEntry","_framerateEntry","_cpsEntry","set","innerHTML","partitonTypes","ballColors","partitions","controls","stats","getElementById","getContext","genearateBalls","number","nChecks","setInterval","frameDelta","framerate","cps","boundaries","requestAnimationFrame","loop","showCollisions","collisions","showPartitions","_ref3","_ref4","gizmo"],"sourceRoot":""}